import{_ as R,r as p,b as Z,l as N,c as r,e,g as M,t as h,F as P,f as I,h as x,a as O,m as S,v as G,i as V,d as T,o as n}from"./index-BD0pCytT.js";import{a as y}from"./Request-CeOy3zXL.js";import{u as U,_ as q}from"./Auth-nvfxAUoJ.js";import Q from"./CadastroSG-C1mN_MDu.js";import H from"./VerficacaoEmail-DKxrsGuZ.js";import"./Logo web-ECiLurst.js";function K(u){if(!u)return"agora mesmo";let m=0;try{if(/^\d+$/.test(u))m=parseInt(u,10)*1e3;else{let w=0,d=0,k=0,g=0;const f=u.match(/^(\d+)\.(\d{2}:\d{2}:\d{2}(\.\d+)?)$/);f&&(w=parseInt(f[1],10),u=f[2]);const _=u.split(":");if(_.length!==3)throw new Error("Formato inválido: "+u);const[$,C,v]=_;d=parseInt($,10),k=parseInt(C,10);const[b,E]=v.split(".");g=parseInt(b,10);const j=Math.floor(parseFloat("0."+(E||"0"))*1e3);m=(((w*24+d)*60+k)*60+g)*1e3+j}const i=Math.floor(m/1e3);if(i<120)return"agora mesmo";const l=Math.floor(i/60);if(l<60)return`há ${l} minuto${l>1?"s":""}`;const a=Math.floor(l/60);if(a<24)return`há ${a} hora${a>1?"s":""}`;const c=Math.floor(a/24);return`há ${c} dia${c>1?"s":""}`}catch(i){return console.error("Erro ao processar timeStr:",u,i),"agora mesmo"}}const J={class:"min-h-screen bg-preto text-white"},W={class:"bg-preto2 border-b border-b-preto2 px-6 py-4"},X={class:"max-w-6xl mx-auto flex items-center justify-between"},Y={class:"flex items-center space-x-4"},ee={class:"text-sm text-gray-400"},oe={class:"max-w-6xl mx-auto px-6 py-8"},te={class:"mb-12"},se={class:"grid gap-6 md:grid-cols-1 lg:grid-cols-2"},re={class:"flex items-start space-x-4 mb-4"},ne={class:"h-12 w-12 bg-amarelo rounded-full overflow-hidden flex-shrink-0"},ae=["src"],le={class:"flex-1 min-w-0"},ie={class:"font-bold font-montserrat text-white truncate"},ce={class:"text-xs text-gray-400 mt-1"},de={class:"text-gray-300 leading-relaxed"},ue={class:"flex items-center space-x-4 mt-4 pt-4 border-t border-gray-700"},me=["onClick"],ge={class:"flex justify-center mt-8 space-x-2"},pe=["onClick"],fe={class:"flex items-end space-x-4 p-6 mt-12 lg:mt-16"},ve={key:0,id:"role-select","aria-label":"Profissão",class:"p-2 lg:p-4 rounded-xl bg-preto2 border border-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-amarelo"},he=["src"],xe={key:1,class:"h-12 w-12 bg-gray-600 rounded-3xl text-sm text-center flex items-center justify-center"},we={class:"flex items-end"},be={class:"w-full rounded-xl border-gray-700 p-6"},ye={class:"max-w-6xl mx-auto flex items-center space-x-4"},ke={__name:"TodosComentarios",setup(u){const m=p(""),i=p(!1),l=p([]),a=p(!1),c=U(),w=p(0),d=p(1);Z(async()=>{c.checkAuth(),c.isLogged&&f(d.value),await g(d.value),w.value=await k(),window.addEventListener("keydown",A)}),N(()=>{window.removeEventListener("keydown",A)});async function k(){try{const t=await y.get("/comments/getPages");return console.log("Quantidade de páginas:",t.data),t.data}catch(t){return console.error("Erro ao obter quantidade de páginas:",t),0}}async function g(t){d.value=t;try{const o=await y.get(`/comments/Listar?page=${t}`);l.value=o.data,console.log("Testemunhos carregados:",l.value)}catch(o){console.error("Erro ao buscar testemunhos:",o)}}async function f(t){d.value=t;try{const o=await y.get(`/comments/GetComments?page=${t}`,null,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});l.value=o.data,console.log("Testemunhos carregados:",l.value)}catch(o){console.error("Erro ao buscar testemunhos:",o)}}async function _(){try{await y.post(`/comments/create?content=${m.value}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}}),console.log("Comentário enviado!"),m.value="",confirm("Comentário enviado com sucesso!")}catch(t){console.error("Erro ao enviar comentário:",t)}}async function $(t){try{await y.post(`/comments/like?commentId=${t}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}}),console.log("Comentário curtido/descurtido!"),await f(d.value)}catch(o){console.error("Erro ao curtir/descurtir comentário:",o)}}function C(){a.value=!0}function v(){a.value=!1}function b(){i.value=!1}function E(){a.value=!1,i.value=!0}function j(){i.value=!1,a.value=!0}function D(){L.value=!1,a.value=!0}const L=p(!1);function F(){i.value=!1,a.value=!1,L.value=!0}function B(){L.value=!1}function A(t){t.key==="Escape"&&a.value&&v()}return(t,o)=>(n(),r(P,null,[e("div",J,[e("header",W,[e("div",X,[e("div",Y,[e("button",{onClick:o[0]||(o[0]=s=>t.$router.go(-1)),class:"text-amarelo hover:text-white transition-colors"},[...o[4]||(o[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),o[5]||(o[5]=e("h1",{class:"text- md:text-3xl font-bold font-montserrat"},"Todos os Comentários",-1))]),e("div",ee,h(l.value.length)+" comentários ",1)])]),e("main",oe,[e("section",te,[e("div",se,[(n(!0),r(P,null,I(l.value,s=>(n(),r("article",{class:"bg-preto2 rounded-xl shadow-md p-6 border border-gray-700 hover:shadow-lg transition-shadow",key:s.id},[e("div",re,[e("div",ne,[e("img",{src:s.userPhotoUrl,class:"object-cover w-full h-full",alt:"Foto do comentador"},null,8,ae)]),e("div",le,[e("h3",ie,h(s.userName),1),o[6]||(o[6]=e("p",{class:"text-sm text-amarelo font-light font-montserrat"},"Programmer",-1)),e("p",ce,h(x(K)(s.timeAgo)),1)])]),e("p",de,'"'+h(s.content)+'"',1),e("div",ue,[e("button",{class:"text-gray-400 hover:text-amarelo transition-colors flex items-center space-x-1 text-sm",onClick:z=>$(s.id)},[o[7]||(o[7]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})],-1)),e("span",null,"Curtir ("+h(s.likesCount)+")",1)],8,me)])]))),128))]),e("div",ge,[e("button",{class:"px-4 py-2 bg-preto2 border border-gray-700 rounded-lg text-gray-400 hover:bg-amarelo hover:text-preto transition-colors",onClick:o[1]||(o[1]=s=>g(d.value-1))},"Anterior"),(n(!0),r(P,null,I(w.value,s=>(n(),r("button",{class:"px-4 py-2 bg-amarelo text-preto rounded-lg font-semibold",key:s,onClick:z=>g(s)},h(s),9,pe))),128)),e("button",{class:"px-4 py-2 bg-preto2 border border-gray-700 rounded-lg text-gray-400 hover:bg-amarelo hover:text-preto transition-colors",onClick:o[2]||(o[2]=s=>g(d.value+1))},"Próximo")])])])]),e("div",fe,[x(c).userData?.profission===null?(n(),r("select",ve,[...o[8]||(o[8]=[O('<option value="" disabled data-v-e5be012e>Profissão</option><option data-v-e5be012e>Programador</option><option data-v-e5be012e>Designer Gráfico</option><option data-v-e5be012e>Analista</option><option data-v-e5be012e>Gerente de Projeto</option><option data-v-e5be012e>Gestor de Marketing</option><option data-v-e5be012e>Mecânico</option><option data-v-e5be012e>Empreendedor</option><option data-v-e5be012e>Doutor</option><option data-v-e5be012e>Enfermeiro</option><option data-v-e5be012e>Professor</option><option data-v-e5be012e>Outro</option>',12)])])):M("",!0),e("div",null,[x(c).isLogged?(n(),r("img",{key:0,class:"h-12 w-12 bg-gray-600 rounded-3xl text-sm text-center flex items-center justify-center",src:x(c).userData?.photoUrl},null,8,he)):(n(),r("div",xe,"foto"))])]),e("section",we,[e("div",be,[e("div",ye,[x(c).isLogged?S((n(),r("input",{key:1,type:"text",placeholder:"Deixe seu comentário...",class:"flex-1 p-3 lg:p-4 rounded-2xl bg-preto2 border border-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-amarelo","onUpdate:modelValue":o[3]||(o[3]=s=>m.value=s)},null,512)),[[G,m.value]]):(n(),r("input",{key:0,type:"text",placeholder:"Deixe seu comentário...",class:"flex-1 p-3 lg:p-4 rounded-2xl bg-preto2 border border-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-amarelo",readonly:"",onFocus:C},null,32)),x(c).isLogged?(n(),r("button",{key:3,onClick:_,"aria-label":"Comentar",class:"h-10 w-10 flex items-center justify-center rounded-full text-amarelo hover:text-white"},[...o[10]||(o[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 16 16",class:"h-8 text-amarelo",fill:"currentColor"},[e("g",{fill:"","fill-rule":"evenodd"},[e("path",{d:"M15.854.146a.5.5 0 0 1 .11.54l-2.8 7a.5.5 0 1 1-.928-.372l1.895-4.738l-7.494 7.494l1.376 2.162a.5.5 0 1 1-.844.537l-1.531-2.407L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM5.93 9.363l7.494-7.494L1.591 6.602l4.339 2.76Z"}),e("path",{d:"M12.5 16a3.5 3.5 0 1 0 0-7a3.5 3.5 0 0 0 0 7m.354-5.354a.5.5 0 0 0-.722.016l-1.149 1.25a.5.5 0 1 0 .737.676l.28-.305V14a.5.5 0 0 0 1 0v-1.793l.396.397a.5.5 0 0 0 .708-.708l-1.25-1.25Z"})])],-1)])])):(n(),r("button",{key:2,onClick:C,"aria-label":"Comentar",class:"h-10 w-10 flex items-center justify-center rounded-full text-amarelo hover:text-white"},[...o[9]||(o[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 16 16",class:"h-8 text-amarelo",fill:"currentColor"},[e("g",{fill:"","fill-rule":"evenodd"},[e("path",{d:"M15.854.146a.5.5 0 0 1 .11.54l-2.8 7a.5.5 0 1 1-.928-.372l1.895-4.738l-7.494 7.494l1.376 2.162a.5.5 0 1 1-.844.537l-1.531-2.407L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM5.93 9.363l7.494-7.494L1.591 6.602l4.339 2.76Z"}),e("path",{d:"M12.5 16a3.5 3.5 0 1 0 0-7a3.5 3.5 0 0 0 0 7m.354-5.354a.5.5 0 0 0-.722.016l-1.149 1.25a.5.5 0 1 0 .737.676l.28-.305V14a.5.5 0 0 0 1 0v-1.793l.396.397a.5.5 0 0 0 .708-.708l-1.25-1.25Z"})])],-1)])]))])])]),a.value?(n(),r("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",onClick:V(v,["self"]),"aria-modal":"true",role:"dialog"},[e("button",{onClick:v,class:"absolute top-4 right-4 text-gray-300 hover:text-amarelo"},[...o[11]||(o[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),T(q,{onOpenRegister:E,onCloseLogin:v},null,8,["onCloseLogin"])])):M("",!0),i.value?(n(),r("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",onClick:V(b,["self"]),"aria-modal":"true",role:"dialog"},[e("button",{onClick:b,class:"absolute top-4 right-4 text-gray-300 hover:text-amarelo"},[...o[12]||(o[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),T(Q,{onCloseRegister:b,onOpenLogin:j,onOpenEmailVerification:F})])):M("",!0),L.value?(n(),r("div",{key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",onClick:V(B,["self"]),"aria-modal":"true",role:"dialog"},[e("button",{onClick:B,class:"absolute top-4 right-4 text-gray-300 hover:text-amarelo"},[...o[13]||(o[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),T(H,{onCloseEmailVerification:B,onOpenLogin:D})])):M("",!0)],64))}},je=R(ke,[["__scopeId","data-v-e5be012e"]]);export{je as default};
