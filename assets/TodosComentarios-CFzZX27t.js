import{_ as P,r as w,b as A,l as I,c as t,e as o,g as C,t as g,F as E,f as D,h as x,a as T,m as R,v as Z,i as $,d as V,o as s}from"./index-Ce4PS0vF.js";import{a as F}from"./Request-CeOy3zXL.js";import{u as z,_ as N}from"./Auth-9dZTd_fn.js";import O from"./CadastroSG-CVLsLlS3.js";import U from"./VerficacaoEmail-BnlDcW2X.js";import"./Logo web-ECiLurst.js";function G(i){if(!i)return"agora mesmo";let u=0;try{if(/^\d+$/.test(i))u=parseInt(i,10)*1e3;else{let b=0,y=0,h=0,m=0;const p=i.match(/^(\d+)\.(\d{2}:\d{2}:\d{2}(\.\d+)?)$/);p&&(b=parseInt(p[1],10),i=p[2]);const k=i.split(":");if(k.length!==3)throw new Error("Formato inválido: "+i);const[M,L,f]=k;y=parseInt(M,10),h=parseInt(L,10);const[j,v]=f.split(".");m=parseInt(j,10);const _=Math.floor(parseFloat("0."+(v||"0"))*1e3);u=(((b*24+y)*60+h)*60+m)*1e3+_}const a=Math.floor(u/1e3);if(a<120)return"agora mesmo";const n=Math.floor(a/60);if(n<60)return`há ${n} minuto${n>1?"s":""}`;const r=Math.floor(n/60);if(r<24)return`há ${r} hora${r>1?"s":""}`;const d=Math.floor(r/24);return`há ${d} dia${d>1?"s":""}`}catch(a){return console.error("Erro ao processar timeStr:",i,a),"agora mesmo"}}const S={class:"min-h-screen bg-preto text-white"},H={class:"bg-preto2 border-b border-b-preto2 px-6 py-4"},K={class:"max-w-6xl mx-auto flex items-center justify-between"},q={class:"flex items-center space-x-4"},J={class:"text-sm text-gray-400"},Q={class:"max-w-6xl mx-auto px-6 py-8"},W={class:"mb-12"},X={class:"grid gap-6 md:grid-cols-1 lg:grid-cols-2"},Y={class:"flex items-start space-x-4 mb-4"},oo={class:"h-12 w-12 bg-amarelo rounded-full overflow-hidden flex-shrink-0"},eo=["src"],to={class:"flex-1 min-w-0"},so={class:"font-bold font-montserrat text-white truncate"},ro={class:"text-xs text-gray-400 mt-1"},ao={class:"text-gray-300 leading-relaxed"},no={class:"flex items-center space-x-4 mt-4 pt-4 border-t border-gray-700"},lo={class:"text-gray-400 hover:text-amarelo transition-colors flex items-center space-x-1 text-sm"},io={class:"flex justify-center mt-8 space-x-2"},co={class:"flex items-end space-x-4 p-6 mt-12 lg:mt-16"},uo={key:0,id:"role-select","aria-label":"Profissão",class:"p-2 lg:p-4 rounded-xl bg-preto2 border border-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-amarelo"},mo=["src"],po={key:1,class:"h-12 w-12 bg-gray-600 rounded-3xl text-sm text-center flex items-center justify-center"},fo={class:"flex items-end"},go={class:"w-full rounded-xl border-gray-700 p-6"},xo={class:"max-w-6xl mx-auto flex items-center space-x-4"},ho={__name:"TodosComentarios",setup(i){const u=w(""),a=w(!1),n=w([]),r=w(!1),d=z();A(()=>{d.checkAuth(),b(),window.addEventListener("keydown",_)}),I(()=>{window.removeEventListener("keydown",_)});async function b(){try{const c=await F.get("/comments/Listar");n.value=c.data,console.log("Testemunhos carregados:",n.value)}catch(c){console.error("Erro ao buscar testemunhos:",c)}}async function y(){try{await F.post(`/comments/create?content=${u.value}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}}),console.log("Comentário enviado!"),u.value="",confirm("Comentário enviado com sucesso!")}catch(c){console.error("Erro ao enviar comentário:",c)}}function h(){r.value=!0}function m(){r.value=!1}function p(){a.value=!1}function k(){r.value=!1,a.value=!0}function M(){a.value=!1,r.value=!0}function L(){f.value=!1,r.value=!0}const f=w(!1);function j(){a.value=!1,r.value=!1,f.value=!0}function v(){f.value=!1}function _(c){c.key==="Escape"&&r.value&&m()}return(c,e)=>(s(),t(E,null,[o("div",S,[o("header",H,[o("div",K,[o("div",q,[o("button",{onClick:e[0]||(e[0]=l=>c.$router.go(-1)),class:"text-amarelo hover:text-white transition-colors"},[...e[2]||(e[2]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e[3]||(e[3]=o("h1",{class:"text- md:text-3xl font-bold font-montserrat"},"Todos os Comentários",-1))]),o("div",J,g(n.value.length)+" comentários ",1)])]),o("main",Q,[o("section",W,[o("div",X,[(s(!0),t(E,null,D(n.value,l=>(s(),t("article",{class:"bg-preto2 rounded-xl shadow-md p-6 border border-gray-700 hover:shadow-lg transition-shadow",key:l.id},[o("div",Y,[o("div",oo,[o("img",{src:l.userPhotoUrl,class:"object-cover w-full h-full",alt:"Foto do comentador"},null,8,eo)]),o("div",to,[o("h3",so,g(l.userName),1),e[4]||(e[4]=o("p",{class:"text-sm text-amarelo font-light font-montserrat"},"Programmer",-1)),o("p",ro,g(x(G)(l.timeAgo)),1)])]),o("p",ao,'"'+g(l.content)+'"',1),o("div",no,[o("button",lo,[e[5]||(e[5]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})],-1)),o("span",null,"Curtir ("+g(l.likesCount)+")",1)])])]))),128))]),o("div",io,[e[6]||(e[6]=o("button",{class:"px-4 py-2 bg-preto2 border border-gray-700 rounded-lg text-gray-400 hover:bg-amarelo hover:text-preto transition-colors"},"Anterior",-1)),(s(!0),t(E,null,D(n.value,(l,B)=>(s(),t("button",{class:"px-4 py-2 bg-amarelo text-preto rounded-lg font-semibold",key:B},g(B+1),1))),128)),e[7]||(e[7]=o("button",{class:"px-4 py-2 bg-preto2 border border-gray-700 rounded-lg text-gray-400 hover:bg-amarelo hover:text-preto transition-colors"},"Próximo",-1))])])])]),o("div",co,[x(d).userData?.profission==null?(s(),t("select",uo,[...e[8]||(e[8]=[T('<option value="" disabled data-v-d198a221>Profissão</option><option data-v-d198a221>Programador</option><option data-v-d198a221>Designer Gráfico</option><option data-v-d198a221>Analista</option><option data-v-d198a221>Gerente de Projeto</option><option data-v-d198a221>Gestor de Marketing</option><option data-v-d198a221>Mecânico</option><option data-v-d198a221>Empreendedor</option><option data-v-d198a221>Doutor</option><option data-v-d198a221>Enfermeiro</option><option data-v-d198a221>Professor</option><option data-v-d198a221>Outro</option>',12)])])):C("",!0),o("div",null,[x(d).isLogged?(s(),t("img",{key:0,class:"h-12 w-12 bg-gray-600 rounded-3xl text-sm text-center flex items-center justify-center",src:x(d).userData?.photoUrl},null,8,mo)):(s(),t("div",po,"foto"))])]),o("section",fo,[o("div",go,[o("div",xo,[x(d).isLogged?R((s(),t("input",{key:1,type:"text",placeholder:"Deixe seu comentário...",class:"flex-1 p-3 lg:p-4 rounded-2xl bg-preto2 border border-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-amarelo","onUpdate:modelValue":e[1]||(e[1]=l=>u.value=l)},null,512)),[[Z,u.value]]):(s(),t("input",{key:0,type:"text",placeholder:"Deixe seu comentário...",class:"flex-1 p-3 lg:p-4 rounded-2xl bg-preto2 border border-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-amarelo",readonly:"",onFocus:h},null,32)),x(d).isLogged?(s(),t("button",{key:3,onClick:y,"aria-label":"Comentar",class:"h-10 w-10 flex items-center justify-center rounded-full text-amarelo hover:text-white"},[...e[10]||(e[10]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 16 16",class:"h-8 text-amarelo",fill:"currentColor"},[o("g",{fill:"","fill-rule":"evenodd"},[o("path",{d:"M15.854.146a.5.5 0 0 1 .11.54l-2.8 7a.5.5 0 1 1-.928-.372l1.895-4.738l-7.494 7.494l1.376 2.162a.5.5 0 1 1-.844.537l-1.531-2.407L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM5.93 9.363l7.494-7.494L1.591 6.602l4.339 2.76Z"}),o("path",{d:"M12.5 16a3.5 3.5 0 1 0 0-7a3.5 3.5 0 0 0 0 7m.354-5.354a.5.5 0 0 0-.722.016l-1.149 1.25a.5.5 0 1 0 .737.676l.28-.305V14a.5.5 0 0 0 1 0v-1.793l.396.397a.5.5 0 0 0 .708-.708l-1.25-1.25Z"})])],-1)])])):(s(),t("button",{key:2,onClick:h,"aria-label":"Comentar",class:"h-10 w-10 flex items-center justify-center rounded-full text-amarelo hover:text-white"},[...e[9]||(e[9]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 16 16",class:"h-8 text-amarelo",fill:"currentColor"},[o("g",{fill:"","fill-rule":"evenodd"},[o("path",{d:"M15.854.146a.5.5 0 0 1 .11.54l-2.8 7a.5.5 0 1 1-.928-.372l1.895-4.738l-7.494 7.494l1.376 2.162a.5.5 0 1 1-.844.537l-1.531-2.407L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM5.93 9.363l7.494-7.494L1.591 6.602l4.339 2.76Z"}),o("path",{d:"M12.5 16a3.5 3.5 0 1 0 0-7a3.5 3.5 0 0 0 0 7m.354-5.354a.5.5 0 0 0-.722.016l-1.149 1.25a.5.5 0 1 0 .737.676l.28-.305V14a.5.5 0 0 0 1 0v-1.793l.396.397a.5.5 0 0 0 .708-.708l-1.25-1.25Z"})])],-1)])]))])])]),r.value?(s(),t("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",onClick:$(m,["self"]),"aria-modal":"true",role:"dialog"},[o("button",{onClick:m,class:"absolute top-4 right-4 text-gray-300 hover:text-amarelo"},[...e[11]||(e[11]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),V(N,{onOpenRegister:k,onCloseLogin:m},null,8,["onCloseLogin"])])):C("",!0),a.value?(s(),t("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",onClick:$(p,["self"]),"aria-modal":"true",role:"dialog"},[o("button",{onClick:p,class:"absolute top-4 right-4 text-gray-300 hover:text-amarelo"},[...e[12]||(e[12]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),V(O,{onCloseRegister:p,onOpenLogin:M,onOpenEmailVerification:j})])):C("",!0),f.value?(s(),t("div",{key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",onClick:$(v,["self"]),"aria-modal":"true",role:"dialog"},[o("button",{onClick:v,class:"absolute top-4 right-4 text-gray-300 hover:text-amarelo"},[...e[13]||(e[13]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),V(U,{onCloseEmailVerification:v,onOpenLogin:L})])):C("",!0)],64))}},Co=P(ho,[["__scopeId","data-v-d198a221"]]);export{Co as default};
